{% load wagtailimages_tags wagtailcore_tags %}

<article>
    {% with value as blog %}
        <div class="blog-preview">
            <figure>
                <a href="{{ blog.url }}">
                    {% image blog.image|default:blog.author.image fill-300x200 %}
                </a>
            </figure>
            <div class="blog-body">
                <header>
                    <h2>
                        <a href="{{blog.url}}">
                            {{ blog.title }}
                        </a>
                    </h2>
                    <p>By {{ blog.author.first_name }} {{ blog.author.last_name }} | { blog.date|date:"n/j/y" }}</p>
                    {% include 'wagtail_blog/fragments/tags.html' with blog_post=blog %}
                </header>
                {{ blog.content|richtext|truncatewords_html:110 }}
                <a href="{{ blog.url }}">Read more...</a>
            </div>
        </div>
    {% endwith %}
</article>
